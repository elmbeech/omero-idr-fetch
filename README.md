# OMERO Image Data Repository (IDR) Fetch

Fetch scripts for retrieving screen data from  the OMERO IDR project - [http://idr-demo.openmicroscopy.org](http://idr-demo.openmicroscopy.org).

`fetch_omero_data` is used to download all metadata for a screen. The output is a tab delimited flat file of all metadata fields (including annotations) and each associated well image.
Annotations are retrieved from the OMERO API as key-value pairs and transformed into columns in the resulting data set.
This simple structure allows the data to be used with other applications.

`fetch_omero_images` is then used to retrieve all images using the OMERO id. 

Currently based on the public endpoints at [http://idr-demo.openmicroscopy.org](http://idr-demo.openmicroscopy.org) and so does not **yet** include functionality to authenticate against a secure server.

## Installation
Use pip to install requirements:
```
$ pip install -r requirements.txt
```

## Usage

### fetch_omero_data
Fetches metadata for a screen and saves it as a tab separated file
```
$ python3 fetch_omero_data.py --id 102
```

**Parameters:**

id [required]: the unique identifier of the screen

output: File name of the tab delimited flat file (default idr.tab)

url: URL of the OMERO server (default http://idr-demo.openmicroscopy.org)

### fetch_omero_images
Fetches images for a screen
```
$ python3 fetch_omero_images.py --output images
```

**Parameters:**

output [required]: Path to the directory where the images will be saved

data: Path to the tab delimited flat file generated by `fetch_omero_data.py` (default idr.tab)

url: URL of the OMERO server (default http://idr-demo.openmicroscopy.org)
